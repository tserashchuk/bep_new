{% load static %}
<!DOCTYPE html>
<html lang="en" dir="">

<head>
  <!-- Required Meta Tags Always Come First -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Title -->
  <title> БелЕвропривод - оборудование для производств</title>

  <!-- Favicon -->
  <link rel="shortcut icon" href="../favicon.ico">
  <link rel="stylesheet" href="{% static "/css/theme.min.css" %}">
  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- CSS Implementing Plugins -->
  <link rel="stylesheet" href="{% static "/vendor/bootstrap-icons/font/bootstrap-icons.css" %}">
  <link rel="stylesheet" href="{% static "/vendor/hs-mega-menu/dist/hs-mega-menu.min.css" %}">
  <link rel="stylesheet" href="{% static "/vendor/aos/dist/aos.css" %}">
  <link rel="stylesheet" href="{% static "/vendor/swiper/swiper-bundle.min.css" %}">

</head>
<header id="header"
  class="navbar navbar-expand-lg navbar-end navbar-sticky-top navbar-light navbar-show-hide navbar-toggle"
  data-hs-header-options='{
      "fixMoment": 1000,
      "fixEffect": "slide"
    }'>

  <div class="container">
    <nav class="js-mega-menu navbar-nav-wrap hs-menu-initialized hs-menu-horizontal">
      <!-- Default Logo -->
      <a class="navbar-brand" href="{% url 'home' %}" aria-label="Front">
        <img class="navbar-brand-logo" src="{% static "/img/theme/logo.png" %}" alt="Logo">
      </a>
      <!-- End Default Logo -->

      <!-- Toggler -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-default">
          <i class="bi bi-list"></i>
        </span>
        <span class="navbar-toggler-toggled">
          <i class="bi-x"></i>
        </span>
      </button>
      <!-- End Toggler -->

      <!-- Collapse -->
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <div class="navbar-absolute-top-scroller">
          <ul class="navbar-nav">
            <!-- Landings -->
            <!-- Demos -->
            <li class="nav-item"><a type="button" onClick=menuTabOpener('nav-one-eg1-tab','nav-one-eg1') class="nav-link rt" data-bs-toggle="modal"
                data-bs-target=".bd-example-modal-xl">Продукты</a></li>
            <li class="nav-item"><a type="button" onClick=menuTabOpener('nav-two-eg1-tab','nav-two-eg1') class="nav-link rt" data-bs-toggle="modal"
                data-bs-target=".bd-example-modal-xl">Производители</a></li>
            <li class="nav-item"><a type="button" onClick=menuTabOpener('nav-four-eg1-tab','nav-four-eg1') class="nav-link rt" data-bs-toggle="modal"
                data-bs-target=".bd-example-modal-xl">Поиск по продуктам</a></li>
            <!-- Account -->
            <li class="hs-has-sub-menu nav-item">
              <a id="accountMegaMenu" class="hs-mega-menu-invoker nav-link " href="{% url 'contact' %}" role="button"
                aria-expanded="false">Контакты / О нас</a>

            </li>
            <!-- End Account -->

            <!-- Button -->
            <li class="nav-item ">
              <span class="text-primary text-highlight-warning"><a class="" href="tel:+375173383033"
                  target="_blank">+375 (17) 338-30-33</a></span>
            </li>
            <!-- End Button -->
          </ul>
        </div>
      </div>
      <!-- End Collapse -->
    </nav>
  </div>
</header>

<body>

  {% block content %}
  {% endblock %}

  <!-- ========== FOOTER ========== -->
<footer class="container content-space-2 text-center">
  <!-- Logo -->
  <a class="d-inline-flex align-items-center mb-3 justify-content-center" href="index.html" aria-label="Front">
    <img class="w-50 brand"  src="{% static "/img/theme/logo.png" %}" alt="Logo">
  </a>
  <!-- End Logo -->

  <p class="fs-6 mb-1">220137 г. Минск, ул. Солтыса, 39 / УНП 191148828</p>
  <p class="fs-6">© БелЕвропривод 2024 - машиностроительное оборудование</p>

  
</footer>
<!-- ========== END FOOTER ========== -->

  <!-- ========== SECONDARY CONTENTS ========== -->
  
  <!-- Go To -->
  <a class="js-go-to go-to position-fixed" href="javascript:;" style="visibility: hidden;" data-hs-go-to-options='{
       "offsetTop": 700,
       "position": {
         "init": {
           "right": "2rem"
         },
         "show": {
           "bottom": "2rem"
         },
         "hide": {
           "bottom": "-2rem"
         }
       }
     }'>
    <i class="bi-chevron-up"></i>
  </a>
  <!-- ========== END SECONDARY CONTENTS ========== -->

  <!-- JS Global Compulsory  -->
  <script src="{% static "/vendor/bootstrap/dist/js/bootstrap.bundle.min.js" %}"></script>

  <!-- JS Implementing Plugins -->
  <script src="{% static "/vendor/hs-mega-menu/dist/hs-mega-menu.min.js" %}"></script>
  <script src="{% static "/vendor/hs-go-to/dist/hs-go-to.min.js" %}"></script>

  <!-- JS Front -->
  <script src="{% static "/js/theme.min.js" %}"></script>
  <script src="{% static "/vendor/hs-video-player/dist/hs-video-player.min.js" %}"></script>

  <!-- JS Implementing Plugins -->
  <script src="{% static "/vendor/hs-header/dist/hs-header.min.js" %}"></script>
  <script src="{% static "vendor/hs-show-animation/dist/hs-show-animation.min.js" %}"></script>
  <script src="{% static "vendor/hs-go-to/dist/hs-go-to.min.js" %}"></script>
  <script src="{% static "vendor/aos/dist/aos.js" %}"></script>
  <script src="{% static "vendor/swiper/swiper-bundle.min.js" %}"></script>
  <script src="{% static "vendor/hs-nav-scroller/dist/hs-nav-scroller.min.js" %}"></script>

  <!-- JS Plugins Init. -->
  <script>
    (function() {
      // INITIALIZATION OF HEADER
      // =======================================================
      new HSHeader('#header').init()
      // INITIALIZATION OF MEGA MENU
      // =======================================================
      new HSMegaMenu('.js-mega-menu', {
        desktop: {
          position: 'left'
        }
      })
      // INITIALIZATION OF SHOW ANIMATIONS
      // =======================================================
      new HSShowAnimation('.js-animation-link')
      // INITIALIZATION OF BOOTSTRAP VALIDATION
      // =======================================================
      HSBsValidation.init('.js-validate', {
        onSubmit: data => {
          data.event.preventDefault()
          alert('Submited')
        }
      })
      // INITIALIZATION OF BOOTSTRAP DROPDOWN
      // =======================================================
      HSBsDropdown.init()
      // INITIALIZATION OF GO TO
      // =======================================================
      new HSGoTo('.js-go-to')
      // INITIALIZATION OF AOS
      // =======================================================
      AOS.init({
        duration: 650,
        once: true
      });
      // INITIALIZATION OF SWIPER
      // =======================================================
      var swiper = new Swiper('.js-swiper-software-hero', {
        preloaderClass: 'custom-swiper-lazy-preloader',
        slidesPerView: 1,
        pagination: {
          el: '.js-swiper-software-hero-pagination',
          dynamicBullets: true,
          clickable: true,
        },
        breakpoints: {
          380: {
            slidesPerView: 2,
            spaceBetween: 15,
          },
          580: {
            slidesPerView: 3,
            spaceBetween: 15,
          },
          768: {
            slidesPerView: 4,
            spaceBetween: 15,
          },
          1024: {
            slidesPerView: 5,
            spaceBetween: 30,
          },
        },
        on: {
          'imagesReady': function(swiper) {
            const preloader = swiper.el.querySelector('.js-swiper-software-hero-preloader')
            preloader.parentNode.removeChild(preloader)
          }
        }
      });
      // INITIALIZATION OF NAV SCROLLER
      // =======================================================
      new HsNavScroller('.js-nav-scroller')
    })()
  </script>

  <script>
    (function() {
      // INITIALIZATION OF VIDEO PLAYER
      // =======================================================
      new HSVideoPlayer('.js-inline-video-player')
    })()
  </script>

  <!-- Modal -->
  <div class="modal fade bd-example-modal-xl" id='me' tabindex="3" role="dialog" aria-labelledby="myExtraLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">

        <div class="modal-header">
          {% comment %} <h5 class="modal-title h4" id="myExtraLargeModalLabel">Extra large modal</h5> {% endcomment %}
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

          <!-- Nav -->
          <div class="text-center">
            <ul class="nav nav-segment nav-pills mb-7" role="tablist">
              <li class="nav-item">
                <a class="nav-link ft" id="nav-one-eg1-tab" href="#nav-one-eg1" data-bs-toggle="pill"
                  data-bs-target="#nav-one-eg1" role="tab" aria-controls="nav-one-eg1" aria-selected="true">Все
                  продукты</a>
              </li>
              <li class="nav-item">
                <a class="nav-link ft" id="nav-two-eg1-tab" href="#nav-two-eg1" data-bs-toggle="pill"
                  data-bs-target="#nav-two-eg1" role="tab" aria-controls="nav-two-eg1"
                  aria-selected="false">Производители</a>
              </li>
              <li class="nav-item">
                <a class="nav-link ft" id="nav-three-eg1-tab" href="#nav-three-eg1" data-bs-toggle="pill"
                  data-bs-target="#nav-three-eg1" role="tab" aria-controls="nav-three-eg1"
                  aria-selected="false">Продукты по назначению</a>
              </li>
              <li class="nav-item">
                <a class="nav-link ft" id="nav-four-eg1-tab" href="#nav-four-eg1" data-bs-toggle="pill"
                  data-bs-target="#nav-four-eg1" role="tab" aria-controls="nav-four-eg1" aria-selected="false">Поиск по
                  названию</a>
              </li> 
            </ul><span class="text-primary text-highlight-warning m-3"><a href="tel:+375173383033"
              target="_blank">+375 (17) 338-30-33</a></span>
          </div>
          <!-- End Nav -->

          <!-- Tab Content -->
          <div class="tab-content">
            <div class="tab-pane fade ft" id="nav-one-eg1" role="tabpanel" aria-labelledby="nav-one-eg1-tab">
              <div class="row gx-3 mx-n2 mb-7">
                {% for category_base in catprocessor_base%}
                <div class="col-sm-6 col-md-4 mb-3">
                  <!-- Card -->
                  <div class="card card-bordered card-transition shadow-none h-100">
                    <a class="card-body" href="{% url 'products' category_base.cat_slug %}">
                      <div class="d-flex">
                        <div class="flex-shrink-0">
                          <img class="avatar avatar-menu" src="{{ category_base.cat_image.url }}" alt="Logo">
                        </div>

                        <div class="flex-grow-1 ms-3">
                          <div class="d-flex align-items-center">
                            <h5 class="card-title mb-0">{{ category_base.cat_name }}</h5>

                          </div>
                          <p class="card-text text-body small"> Выберите из {{ category_base.product_set.all | length }} основных продуктов</p>
                        </div>
                      </div>
                    </a>
                  </div>
                  <!-- End Card -->
                </div>
                <!-- End Col -->
                {% endfor %}




                <div class="col-sm-6 col-md-4 mb-3">
                  <!-- Card -->
                  <a class="card card-transition bg-light h-100 shadow-none overflow-hidden" href="#">
                    <div class="row align-items-center">
                      <div class="col-8 col-md-8">
                        <div class="card-body">
                          <h4 class="card-title">Не нашли продукт?</h4>
                          <span class="card-link">Закажите звонок <i class="bi-chevron-right small"></i></span>
                        </div>
                      </div>
                      <!-- End Col -->

                      
                      <!-- End Col -->
                    </div>
                    <!-- End Row -->
                  </a>
                  <!-- End Card -->
                </div>





              </div>
            </div>

            <div class="tab-pane fade ft" id="nav-two-eg1" role="tabpanel" aria-labelledby="nav-two-eg1-tab">
              <div class="row gx-3 mx-n2 mb-7">
                {% for manufacturer_base in manufacturers_base%}
                <div class="col-sm-6 col-md-4 mb-3">
                  <!-- Card -->
                  <div class="card card-bordered card-transition shadow-none h-100">
                    <a class="card-body" href="{% url 'manufacturer' manufacturer_base.manufacturer_slug %}">
                      <div class="d-flex">
                        <div class="flex-shrink-0">
                          <img class="avatar avatar-menu" src="{{ manufacturer_base.manufacturer_image.url }}"
                            alt="Logo">
                        </div>

                        <div class="flex-grow-1 ms-3">
                          <div class="d-flex align-items-center">
                            <h5 class="card-title mb-0">{{ manufacturer_base.manufacturer_name }}</h5>

                          </div>
                          <p class="card-text text-body small">Выберите из {{ manufacturer_base.product_set.all | length }} основных продуктов</p>
                        </div>
                      </div>
                    </a>
                  </div>
                  <!-- End Card -->
                </div>
                <!-- End Col -->
                {% endfor %}



                <div class="col-sm-6 col-md-4 mb-3">
                  <!-- Card -->
                  <a class="card card-transition bg-light h-100 shadow-none overflow-hidden" href="#">
                    <div class="row align-items-center">
                      <div class="col-8 col-md-8">
                        <div class="card-body">
                          <h4 class="card-title">Не нашли производителя?</h4>
                          <span class="card-link">Закажите звонок <i class="bi-chevron-right small"></i></span>
                        </div>
                      </div>
                      <!-- End Col -->

                      
                      <!-- End Col -->
                    </div>
                    <!-- End Row -->
                  </a>
                  <!-- End Card -->
                </div>



              </div>
            </div>

            <div class="tab-pane fade ft" id="nav-three-eg1" role="tabpanel" aria-labelledby="nav-three-eg1-tab">
              {% for producttag_base in producttags_base%}
              <span class="badge bg-soft-secondary text-secondary m-1"><a
                  href="{% url 'producttag' producttag_base.tag_slug %}">{{producttag_base.tag_name}}</a></span>
              {% endfor %}
            </div>

            <div class="tab-pane fade ft" id="nav-four-eg1" role="tabpanel" aria-labelledby="nav-four-eg1-tab">
              <!-- Search -->
              <div class="mb-4">
                <div class="mb-3">
                  <h4><span id="pcount">Всего в базе 145</span> <span class="text-body small">продуктов</span></h4>
                </div>

               
                  <!-- Input Card -->
                  <div class="input-card border">
                    <div class="input-card-form">
                      <label for="searchAppsForm" class="form-label visually-hidden">Search for apps</label>
                      <div class="input-group input-group-merge">
                        <span class="input-group-prepend input-group-text">
                          <i class="bi-search"></i>
                        </span>
                        <input type="text" class="form-control" id="searchAppsForm" placeholder="Search for apps"
                          aria-label="Search for apps">
                      </div>
                    </div>
                    <button  class="btn btn-primary">
                      <i class="bi-arrow-right"></i>
                    </button>
                  </div>
                  <!-- End Input Card -->
                
              </div>
              <!-- End Search -->
              <table><tbody id="wr"></tbody></table>
              <script>
                function getCookie(name) {
                  let cookieValue = null;
                  if (document.cookie && document.cookie !== '') {
                    const cookies = document.cookie.split(';');
                    for (let i = 0; i < cookies.length; i++) {
                      const cookie = cookies[i].trim();
                      // Does this cookie string begin with the name we want?
                      if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                      }
                    }
                  }
                  return cookieValue;
                }
                const csrftoken = getCookie('csrftoken');
                const getSearch = async (searchquery) => {
                  
                  let response = await fetch(`/search`, {
                    method: 'POST',
                    headers: {
                      "X-CSRFToken": csrftoken
                    },
                    body: JSON.stringify({
                      searchquery: searchquery
                    })
                  })
                  let data = await response.json()
                  return data
                }
                const bclick = async () => {
                  let wr = document.getElementById('wr')
                  let searchfield = document.getElementById('searchAppsForm')
                  let pc = document.getElementById('pcount')
                  let a = await getSearch(searchfield.value)
                  wr.innerHTML = ''
                  pc.innerHTML = 'Найдено '+ a.length
                  console.log(a)
                  for (const [key, value] of Object.entries(a)) {
                    wr.innerHTML +=
                      `<tr><td><a href="/product/${value[1]}">${value[0]}</a></td></tr>`
                    if (key == 30) {
                      break
                    }
                  }
              
                }
                document.addEventListener('keydown', (event) => {
                  if (event.keyCode == 13) {
                    bclick()
                  }
                }, false);
              </script>

            </div>
          </div>
          <!-- End Tab Content -->
        </div>
      </div>
    </div>
  </div>
  <!-- End Modal -->
<script>
  const menuTabOpener = (t,e) =>{
    document.getElementById(t).click()
     
  }

</script>
</body>

</html>